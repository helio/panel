#!/usr/bin/env php

<?php
require __DIR__ . '/../src/bootstrap.php';

use Symfony\Component\Console\Application;

$command = new \Helio\Panel\Command\ExecuteScheduledJob();

$application = new Application();
$application->add($command);

try {
    $application->run();
} catch (\Throwable $e) {
    echo 'Error during cli execution: ' . print_r([
            'message' => $e->getMessage(),
            'code' => $e->getCode(),
            'file' => $e->getFile(),
            'line' => $e->getLine(),
            'prev' => $e->getTrace(),
            'stacktrace' => 'PROD' === \Helio\Panel\Utility\ServerUtility::get('SITE_ENV', '') ? null : $e->getTrace(),
        ], true);
}
